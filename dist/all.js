const modal=document.querySelector("#modal"),openModal=document.querySelector("#modalButton"),closeModal=document.querySelector("#closeModal"),resetClicks=document.querySelector("#resetClicks"),outputText=document.querySelector("#outputText"),table=document.querySelector("#table"),usersTableContent=document.querySelector("#usersTableContent"),progressBarLabel=document.querySelector("#progressBarLabel"),progressBar=document.querySelector("#progressBar"),fetchData=(openModal.onclick=()=>{modal.style.display="block",localStorage.hasOwnProperty("clicks")?(localStorage.clicks=Number(localStorage.clicks)+1,outputText.innerHTML="You have clicked <strong>"+localStorage.clicks+" times </strong> to related button.",5<localStorage.clicks&&(resetClicks.style.display="block")):(localStorage.clicks=1,outputText.innerHTML="You have clicked <strong>"+localStorage.clicks+" time </strong> to related button."),insertDataToTable()},resetClicks.onclick=()=>{localStorage.clear(),modal.style.display="none",resetClicks.style.display="none"},closeModal.onclick=()=>{modal.style.display="none"},window.onclick=e=>{e.target==modal&&(modal.style.display="none")},async()=>{try{const e=await fetch("https://jsonplaceholder.typicode.com/users");if(e.ok)return await e.json();throw new Error("HTTP error: "+e.status)}catch(e){console.error(e.message)}}),insertDataToTable=async()=>{try{progressBarLabel.style.display="block",progressBar.style.display="block";const e=await fetchData();e.forEach(e=>{let t=document.createElement("tr"),o=document.createElement("td"),l=document.createElement("td"),a=document.createElement("td"),r=document.createElement("td"),c=document.createElement("td");o.innerHTML=e.name,l.innerHTML=e.email,a.innerHTML=e.address.city+", "+e.address.street+", "+e.address.suite,r.innerHTML=e.phone,c.innerHTML=e.company.name,t.appendChild(o),t.appendChild(l),t.appendChild(a),t.appendChild(r),t.appendChild(c),usersTableContent.appendChild(t)})}finally{progressBarLabel.style.display="none",progressBar.style.display="none",table.style.display="block"}};